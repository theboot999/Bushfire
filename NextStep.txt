Trim the building down to its right size.  Top left will always be top left of the tile referencing the building in game


Create the exapnded building version.  1 expanded building for each rotation and type of building AND tileset (is for each tileset the right way to do it?)  otherwise every time we would need to do a lookup?  Yes i think it is the right way.
The expanded building also needs these things.
direction facing
a 2d array of pieces. top left of the object iwll be start of array


when we place an object.  we create a new mapObject with its own ID.  the mapobject itself links to the house object.  but when drawing how do we calculate if that should part should be burnt.
okay so. mapobjects are added to a list when itterating over the tiles.  we then draw the mapojbects after all the base tiles are drawn from that list.  then we itterate thorugh that object again adn do the shadows.  so any burn textures need to be done through that mapobject.

Okay so the tile itself needs to record if its burnt. not sure how to do it if tiles are partialy burnt. an array in each tile thats null unless used? worry about that later


But the basic premise is........

do the normal ground draw pass. While doing the pass add any objects that you come across to the object list
do the object pass from the object list
do another normal pass, thsi time adding any burn effects (So we need a burnt effect that changes the texture black)
do the lighting pass from the object list, whilst adding shadows etc
while doig the lighting pass we also need to make sure we have heights on our effects, so the house itself will be drawn as black onto our effects so car lights dont go into the house

OKAY Object has to be seperate from the ground piece because we are using that to add dark to our shadow map.

so

this means though, that as we place the object down, each corresponding tile that the building would touch needs to change the tile to type building, and maybe child object and reference the child object.


okay the sprite reference gets stored in each piece iteslf as we sometimes will make seperate pieces for driveway or a tree object or whatever. or do we. we can think about that





8*8
